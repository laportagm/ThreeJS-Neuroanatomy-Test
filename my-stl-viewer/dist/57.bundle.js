"use strict";(self.webpackChunkmy_stl_viewer=self.webpackChunkmy_stl_viewer||[]).push([[57],{223:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});var n=r(477);class o extends n.aNw{constructor(e){super(e)}load(e,t,r,o){const s=this,a=new n.hH6(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(r){try{t(s.parse(r))}catch(t){o?o(t):console.error(t),s.manager.itemError(e)}}),r,o)}parse(e){function t(e,t,r){for(let n=0,o=e.length;n<o;n++)if(e[n]!==t.getUint8(r+n))return!1;return!0}const r=function(e){if("string"==typeof e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer||t}return e}(e);return function(e){const r=new DataView(e);if(84+50*r.getUint32(80,!0)===r.byteLength)return!0;const n=[115,111,108,105,100];for(let e=0;e<5;e++)if(t(n,r,e))return!1;return!0}(r)?function(e){const t=new DataView(e),r=t.getUint32(80,!0);let o,s,a,l,i,c,u,f,g=!1;for(let e=0;e<70;e++)1129270351==t.getUint32(e,!1)&&82==t.getUint8(e+4)&&61==t.getUint8(e+5)&&(g=!0,l=new Float32Array(3*r*3),i=t.getUint8(e+6)/255,c=t.getUint8(e+7)/255,u=t.getUint8(e+8)/255,f=t.getUint8(e+9)/255);const h=new n.u9r,d=new Float32Array(3*r*3),w=new Float32Array(3*r*3),p=new n.Ilk;for(let e=0;e<r;e++){const r=84+50*e,n=t.getFloat32(r,!0),f=t.getFloat32(r+4,!0),h=t.getFloat32(r+8,!0);if(g){const e=t.getUint16(r+48,!0);0==(32768&e)?(o=(31&e)/31,s=(e>>5&31)/31,a=(e>>10&31)/31):(o=i,s=c,a=u)}for(let i=1;i<=3;i++){const c=r+12*i,u=3*e*3+3*(i-1);d[u]=t.getFloat32(c,!0),d[u+1]=t.getFloat32(c+4,!0),d[u+2]=t.getFloat32(c+8,!0),w[u]=n,w[u+1]=f,w[u+2]=h,g&&(p.set(o,s,a).convertSRGBToLinear(),l[u]=p.r,l[u+1]=p.g,l[u+2]=p.b)}}return h.setAttribute("position",new n.TlE(d,3)),h.setAttribute("normal",new n.TlE(w,3)),g&&(h.setAttribute("color",new n.TlE(l,3)),h.hasColors=!0,h.alpha=f),h}(r):function(e){const t=new n.u9r,r=/solid([\s\S]*?)endsolid/g,o=/facet([\s\S]*?)endfacet/g,s=/solid\s(.+)/;let a=0;const l=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,i=new RegExp("vertex"+l+l+l,"g"),c=new RegExp("normal"+l+l+l,"g"),u=[],f=[],g=[],h=new n.Pa4;let d,w=0,p=0,y=0;for(;null!==(d=r.exec(e));){p=y;const e=d[0],r=null!==(d=s.exec(e))?d[1]:"";for(g.push(r);null!==(d=o.exec(e));){let e=0,t=0;const r=d[0];for(;null!==(d=c.exec(r));)h.x=parseFloat(d[1]),h.y=parseFloat(d[2]),h.z=parseFloat(d[3]),t++;for(;null!==(d=i.exec(r));)u.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),f.push(h.x,h.y,h.z),e++,y++;1!==t&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+a),3!==e&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+a),a++}const n=p,l=y-p;t.userData.groupNames=g,t.addGroup(n,l,w),w++}return t.setAttribute("position",new n.a$l(u,3)),t.setAttribute("normal",new n.a$l(f,3)),t}("string"!=typeof(o=e)?(new TextDecoder).decode(o):o);var o}}const s=class{constructor(e){this.scene=e,this.loader=new o}loadModel(e,t={x:0,y:0,z:0}){return new Promise(((r,o)=>{this.loader.load(`assets/stl-files/${e}`,(e=>{const o=new n.Wid({color:8421504}),s=new n.Kj0(e,o);s.position.set(t.x,t.y,t.z),this.scene.add(s),r(s)}),void 0,(e=>{o(e)}))}))}}}}]);